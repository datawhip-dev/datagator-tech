# ðŸ§© DataGator Verb Lifecycle Matrix

| Verb         | Host Pre (pre-*.sh)                                                 | Host Post (post-*.sh)                                          | Docker Run Description                                     | Container Implementation (verbs/*.sh)                                    |
|--------------|---------------------------------------------------------------------|----------------------------------------------------------------|------------------------------------------------------------|--------------------------------------------------------------------------|
| `doctor`     | None                                                                | None                                                           | Not required                                               | Perform self-diagnostics: DB health, schema, tools, tmpfs, swap, etc.    |
| `verify`     | Validate presence of all required YAML, SQL, and schema files       | None                                                           | Optional (e.g. `verify.sh`)                                | Validate SQL directory, schema introspection, manifest field checks      |
| `reset`      | Optional confirmation, remove old tarballs, drop bind-mounted state | Remove `.pgdata/`, `.results/`, `run/secrets/`, and old logs   | Minimal: `--rm`, map only base volume                      | Drop and recreate DB, user, schema (ephemeral only)                      |
| `condense`   | None                                                                | Save deduped archive, update summary logs                      | None                                                       | Archive/GC old sessions and fs_volumes, summarize                        |
| `import`     | Validate input file exists and is proper YAML/JSON format           | Record summary (rows inserted, tables touched), archive source | Map input file into container at `/data/import.yaml`       | Parse and ingest import file into correct tables, validate schema match  |
| `export`     | Validate session or host exists, create temp target path            | Move export file to results dir, log export target             | Map export location, output file to `/data/export.yaml`    | Query filtered data, write to YAML/JSON, validate serialization          |
| `scan`       | Confirm presence of `scan.yaml`, validate format                    | Store session ID + results log in `.results/`                  | Map `scan.yaml` to `/data/scan.yaml`                       | Hydrate PGDATA, rotate user, ingest `scan.yaml` into session + file_scan |
| `rescan`     | Load previous session metadata, validate session ID                 | Summarize deltas, updated files, volume changes                | Map `scan.yaml` if used, maybe override session ID via env | Clear and reinsert `file_scan` data from prior config                    |
| `dev_server` | None                                                                | Optionally expose connection info, log startup details         | `--rm=false`, `-p 5432:5432`, bind PGDATA, logs, secrets   | Run postgres, keep open, serve DB with ephemeral user + local schema     |